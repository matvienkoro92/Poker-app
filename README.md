# Poker21 — Telegram Mini App (Welcome Screen)

Простая приветственная страница покерного клуба **Poker21** для запуска внутри Telegram Mini App.

## Стэк

- Чистый HTML / CSS / JavaScript
- Интеграция с `telegram-web-app.js` (инициализация Mini App, отправка события в бота)

## Структура

- `index.html` — основной файл мини-приложения (приветственный экран)
- `styles.css` — оформление и адаптивная верстка
- `app.js` — логика и интеграция с Telegram WebApp
- `package.json` — служебный файл для быстрого локального запуска

## Локальный запуск

```bash
npm install -g serve
serve .
```

После запуска откройте в браузере:

```text
http://localhost:3000
```

## Использование в Telegram

1. Задеплойте содержимое папки на любой статический хостинг (например, на Vercel / Netlify / GitHub Pages / свой сервер).
2. В настройках вашего Telegram-бота укажите URL этого мини-приложения как WebApp.
3. При нажатии на кнопку «Начать игру» Mini App отправит боту JSON:

```json
{ "action": "enter_club" }
```

Далее бот может открыть лобби, список столов и т.п. — в зависимости от вашей логики.

## Счётчик посетителей (уникальные / повторные)

В подвале отображаются «Уникальных» и «Повторных» визитов. Для работы нужен Redis в облаке [Upstash](https://upstash.com) (бесплатный тариф):

1. Зарегистрируйтесь на https://upstash.com и создайте базу Redis.
2. В проекте Vercel: **Settings → Environment Variables** добавьте:
   - `UPSTASH_REDIS_REST_URL` — REST URL вашей базы
   - `UPSTASH_REDIS_REST_TOKEN` — REST Token
3. После деплоя запросы к `/api/visit` будут сохранять визиты и отдавать счётчики.

## Авторизация через Telegram

Приложение проверяет, что пользователь открыл Mini App из Telegram: данные `initData` отправляются на сервер и проверяются по токену бота.

1. В Vercel → **Settings → Environment Variables** добавьте переменную **TELEGRAM_BOT_TOKEN** (токен бота от [@BotFather](https://t.me/botfather)).
2. В `index.html` у контейнера `#app` замените атрибут **data-telegram-app-url** на ссылку на вашего бота, например: `https://t.me/ВашБот` или `https://t.me/ВашБот/yourapp`.
3. Если пользователь открывает приложение не из Telegram (например, в браузере), отображается баннер «Откройте приложение в Telegram» и кнопка перехода по этой ссылке. Если открыто из Telegram и проверка прошла успешно, в шапке показывается «Привет, Имя!».

